name: Deploy Production (Vercel)

on:
  workflow_dispatch: {}
  push:
    branches: [ "main" ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Validate hook URL
        run: |
          if [ -z "${{ secrets.VERCEL_DEPLOY_HOOK_URL }}" ]; then
            echo "Missing secret VERCEL_DEPLOY_HOOK_URL"; exit 2;
          fi
      - name: Trigger Vercel deploy (production)
        run: |
          curl -fsS -X POST "${{ secrets.VERCEL_DEPLOY_HOOK_URL }}" || { echo "Vercel hook failed"; exit 3; }